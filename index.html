
<!--
Copyright 2015 Google Inc. All Rights Reserved.

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->
<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Bluetooth Printer</title>
    <meta name="description" content="Print text and images to a Bluetooth Printer with a Web Bluetooth app.">

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1, user-scalable=yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
<meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">


    <script src="bower_components/webcomponentsjs/webcomponents-lite.min.js"></script>

    <!-- Polymer components -->
    <link rel="import" href="bower_components/paper-progress/paper-progress.html">
    <link rel="import" href="bower_components/paper-slider/paper-slider.html">
    <link rel="import" href="bower_components/paper-button/paper-button.html">
    <link rel="import" href="bower_components/paper-card/paper-card.html">
    <link rel="import" href="bower_components/paper-dialog/paper-dialog.html">
    <link rel="import" href="bower_components/paper-input/paper-input.html">
    <link rel="import" href="bower_components/paper-input/paper-input-container.html">
    <link rel="import" href="bower_components/paper-input/paper-input-error.html">
    <link rel="import" href="bower_components/paper-input/paper-input-char-counter.html">
    <link rel="import" href="bower_components/paper-input/paper-textarea.html">

    <link rel="import" href="bower_components/paper-styles/color.html">
    <link rel="stylesheet" href="bower_components/paper-styles/demo.css">

    <style is="custom-style">
      paper-progress {
        width: 100%;
      }
      paper-progress.blue {
        paper-progress-active-color: var(--paper-light-blue-500);
        paper-progress-secondary-color: var(--paper-light-blue-100);
      }
      paper-slider {
        width: 100%;
      }
      paper-slider.blue {
        paper-slider-active-color: var(--paper-light-blue-500);
        paper-slider-knob-color: var(--paper-light-blue-500);
      }
      paper-button {
        display: block;
        margin-bottom: 2px;
      }
      paper-button.colorful {
        color: #4285f4;
      }
      paper-button[raised].colorful {
        background: #4285f4;
        color: #fff;
      }
      paper-button.blue {
        color: var(--paper-light-blue-500);
        paper-button-flat-focus-color: var(--paper-light-blue-50);
      }
      body {
        background-color: var(--paper-grey-50);
      }
      #cards {
        margin-left: auto;
        margin-right: auto;
        max-width: 400px;
      }
      paper-card {
        margin-bottom: 5px;
        margin-top: 5px;
        width: 100%;
      }
      paper-card#logo {
        @apply(--layout-vertical);
        @apply(--layout-center);
      }
    </style>
  </head>
  <body unresolved>
    <div id="cards">
      <paper-card heading="">
        <div class="card-content">
          <img src="./bower_components/logo.png" alt="Grupo Dinosaurio" width="100%">
          <paper-progress id="progress" indeterminate></paper-progress>
        </div>
      </paper-card>

      <paper-card id="logo">
        <div class="card-content" id="imagenContainer" style="height: 200px;">
          <image style="  transform: rotate(90deg);margin-top: 100px;" id="image" src="" ></image>
        </div>
      </paper-card>

      <paper-card>
        <div class="card-content">
          <paper-textarea id="message" label="Enter ean"></paper-textarea>
        </div>
      </paper-card>

      <paper-card>
        <div class="card-content">
          <paper-button onclick="obtenerImagen()" raised class="colorful">Precio</paper-button>
        </div>
        <div class="card-content">
          <paper-button id="print" raised class="colorful">Print</paper-button>
        </div>
      </paper-card>

      <paper-dialog id="dialog">
        <h2>Error</h2>
        <p>Could not connect to bluetooth device!</p>
      </paper-dialog>
    </div>
    <script>
        function obtenerImagen() {
      const ean = document.getElementById("message").value;
        if (!ean) {
          alert("Por favor, ingrese un parámetro EAN válido.");
          return;
        }

        const url = `https://www.dinosauriorrhh.com.ar/apireporteprecios/precios/${ean}`;
          fetch(url)
          .then((response) => response.text())
          .then((base64Image) => {
            console.log("ok dentro de response");
            const imagenContainer = document.getElementById("imagenContainer");
            console.log(imagenContainer);
            var imghtml = `<img src="data:image/jpeg;base64,${base64Image.slice(1, -1)}" style="  transform: rotate(90deg); width: 200px;margin-top: 80px;"> `;
            imagenContainer.innerHTML = imghtml;
//prueba desde
            let canvas = document.createElement('canvas');
            var img = new Image();
            //img.src = "data:image/png;base64," + base64Image.slice(1, -1);
            img.src = "data:image/jpeg;base64,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+XcB5ZQRIwi+U4AR8/J0BxTW6/rr/kI6IeKLvTr6a28Q6fa2KpZSXqTWt21whSMgSBt0aEEblI4OcnkYpE8S6nbG0udY0SOx067lWKOVbzzZYmc4j85NgC5JAO13wSO2SMy48HXEd7qthCbm50/VrF4VvLq6aeaxcD7m6RixjY4bAzhgc8EYtXseueI7S20e90R7FFnilu7triN4WEUiviHa287ioxvVMAknkAEXT+ur/QH/AF9yN7V9VOki1mkg32kk6xTzb8eQG4ViMcjdtB5GM57Uul6m+paW2ofZxHC5Zrf58mSIfdc8DbuHIHPBH0FbxJYXGsWsWkLCxsbxil9MJAu2EDJQc5y/3eOgLHIIGZNDhv49INjqSnzbdmgWfcD58Y4STg8ErjIOPmB4xipd7O2/9f194+q/r+v+G7lQeKM+E9K1z7H/AMhA2g8nzf8AV+e6L97HO3fnoM47VSg8cibQfEGotpzRy6Q1xiBpf9ekbOocNjgMUYdDgqeveha6Zrb6Fo3hmbSJIU0+a283UTPEYHjgdWBQBjIWbYowyKBk88DNbVfCmsSeBtQisrVDq7SX6JC0qgTQTzOdu7OAcFHGe64OMmrdtbd/w0t+o1bS/l+tz0VW3IrYxkZpahgdyzRNBIgjCgSMV2vxzjBzx05A9s1NUsiN7K4UUUUDCiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKz013SJNWbSk1WxbUl+9ZrcIZhxnlM7unPStCgAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACvDfiN8d30fU5tH8LQwTTQMUnvZgWQMOqovGcH+I8deD1r2HX55rXw5qdxbkiaK0leMgdGCEj9a+OPh5Y6dqnxC0Wz1fY1nNcgSLJ0c8lVP1bA/GpSc58g2+WHMRQ+OfEMHi+TxVHfKNYkJ3zeSmCCu3G3GOgx0r3j4ZfG7/hKNUi0PxBbQ22oTHFvcQZEcpx90gk7W9OcE8ccZ5/T7G0uP2ntTsJraJ7R4niaB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UAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFAH/9k=" 
            canvas.width = img.width;
            canvas.height = img.height;
            const ctx = canvas.getContext('2d');
            ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
            imagenContainer.appendChild(canvas);
//prueba hasta         
          })
          .catch((error) => {
            console.log(error);
            const imagenContainer = document.getElementById("imagenContainer");
            var imghtml = `<h6>Error en fetch. /h6>`;
            imagenContainer.innerHTML = ""+imghtml;
            //prueba desde
            let canvas = document.createElement('canvas');
            var img = new Image();
            //img.src = "data:image/png;base64," + base64Image.slice(1, -1);
            img.src = "data:image/jpeg;base64,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+XcB5ZQRIwi+U4AR8/J0BxTW6/rr/kI6IeKLvTr6a28Q6fa2KpZSXqTWt21whSMgSBt0aEEblI4OcnkYpE8S6nbG0udY0SOx067lWKOVbzzZYmc4j85NgC5JAO13wSO2SMy48HXEd7qthCbm50/VrF4VvLq6aeaxcD7m6RixjY4bAzhgc8EYtXseueI7S20e90R7FFnilu7triN4WEUiviHa287ioxvVMAknkAEXT+ur/QH/AF9yN7V9VOki1mkg32kk6xTzb8eQG4ViMcjdtB5GM57Uul6m+paW2ofZxHC5Zrf58mSIfdc8DbuHIHPBH0FbxJYXGsWsWkLCxsbxil9MJAu2EDJQc5y/3eOgLHIIGZNDhv49INjqSnzbdmgWfcD58Y4STg8ErjIOPmB4xipd7O2/9f194+q/r+v+G7lQeKM+E9K1z7H/AMhA2g8nzf8AV+e6L97HO3fnoM47VSg8cibQfEGotpzRy6Q1xiBpf9ekbOocNjgMUYdDgqeveha6Zrb6Fo3hmbSJIU0+a283UTPEYHjgdWBQBjIWbYowyKBk88DNbVfCmsSeBtQisrVDq7SX6JC0qgTQTzOdu7OAcFHGe64OMmrdtbd/w0t+o1bS/l+tz0VW3IrYxkZpahgdyzRNBIgjCgSMV2vxzjBzx05A9s1NUsiN7K4UUUUDCiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKz013SJNWbSk1WxbUl+9ZrcIZhxnlM7unPStCgAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACvDfiN8d30fU5tH8LQwTTQMUnvZgWQMOqovGcH+I8deD1r2HX55rXw5qdxbkiaK0leMgdGCEj9a+OPh5Y6dqnxC0Wz1fY1nNcgSLJ0c8lVP1bA/GpSc58g2+WHMRQ+OfEMHi+TxVHfKNYkJ3zeSmCCu3G3GOgx0r3j4ZfG7/hKNUi0PxBbQ22oTHFvcQZEcpx90gk7W9OcE8ccZ5/T7G0uP2ntTsJraJ7R4niaBkGwp9mUbcdMVJD+ztqMPiCS7tfEFvZ2sVyZbQpG8siKGymeV5HHQ1cGrRvs19xEvtW3TPoGikXIUBiCcckDGa+VviP8AGDxHrl9f6LbMum6dFM8DpbsfMlCkj5n64OOgx75qW7OyLSurs6j4q/GjUbLxDHpng7U1ijtQy3VwkUcqySZ+6N6nhcdR1JPpXoXwc8Sav4q8DHUdau/tV39rkj8zy0T5QFwMKAO5r5R1XQ9R0M2i6lbPbvdQC4iR/veWSQCR2zg8Gvpj9nv/AJJof+v6X+S1dNWjK/8AWpFR6xt/Wh6tRRXyr8R/jB4j1y+v9FtmXTdOimeB0t2PmShSR8z9cHHQY981m3bQtLqdR8VfjRqNl4hj0zwdqaxR2oZbq4SKOVZJM/dG9TwuOo6kn0r0L4OeJNX8VeBjqOtXf2q7+1yR+Z5aJ8oC4GFAHc18o6roeo6GbRdStnt3uoBcRI/3vLJIBI7ZweDX0x+z3/yTQ/8AX9L/ACWtKatGV/61IqPWNv60PVq8d+LHxb1jwL4jtdL0m10+YPaieU3UbsQSzAAbXXstexV8g/GvUP7Q+KmrAHKW/lwL7bUGf1JrKT95JGiWjZv/APDR3jD/AKBuh/8Afib/AOO0f8NHeMP+gbof/fib/wCO11+g/s9+G77w9p13qF9rMd5PbRyzJHLEFV2UEgAxkjBPc1of8M4+D/8AoJa5/wB/4f8A41WjVnZkJ3V0d74j8Ur4b8CXHiK4jDtFbLIIxwGkbAUfTcR+FfPuj3nxT+JCanrOm6/cwx2PJihunt0Y8nYipwTj+96jJr1f4325g+EN1DDuKQyW6knrtDgc/pWR+znJGPAWqZZQy6g5f2HlpjP5Gpdm5yXTb+vmPVRin13G/BL4m6l4onutB16YT3sMfnQXBUKzoCAytjgkZGD1xnPSub8e/ETxV4k+ILeD/Cl5JZRJcfZFaBvLeWQHDMXHKqCD07DPNc/8Df3nxdV4OIvJuGx1+XHH6kU3wD+6/aHQXHDf2jeKd397bJ/WqtzShfqrg/djO3R/oaUHjTx18KvG0OleKNUl1Oyba8yyzNOHibjfG7DcCMHjjkdK+mUdZI1dGDIwBUjoQa+Zv2j3ibxzpqL/AKxdPXfz28x8f1r6J8PrInhrSll/1gs4g312DNEXzQu+j/z/AMhSXLOy6r/L/M0qKKKQwooooAKKKKACiiigAooooAKKKKACiiigAooooAbJGksbRyKGRwVZT0INfHnxI+HepeBtdmdIJH0iWQtaXaglQDyEY9mHTnrjIr7EJABJOAOpNUP7T0e+uX0z7dY3E7oS1r5qOxXvlM5xz6UmtboaelmfGvhzxvq3h3xdH4kDLf3yqUZrws+8FdvJBBzjof519F+Bfjbofi68i028gfS9TlO2OORw8Up7BXwOT6ED0BNeX3HgnRtf/aB1Tw08JstOYMUSyCx+WRCrfKMYHPbFcJ438K3HgbxdcaQ9x53lbZYZ1G0uhGQcdj2+opqatHm6olx1ly7o+2q4Dw78IfDeha1PrU8bajqUk7zrJcAbIizE/KnTIz1OT6YrovBmqTa14K0XUrk5nubON5T6ttGT+JzW7Ta5ZeaBPmj6ny9+0X/yUK0/7B0f/ob16X+z3/yTQ/8AX9L/ACWvNP2i/wDkoVp/2Do//Q3r0v8AZ7/5Jof+v6X+S0qPwy+f5jrfFH5fkerVwHh34Q+G9C1qfWp421HUpJ3nWS4A2RFmJ+VOmRnqcn0xXf0ULR3B6qx8vftF/wDJQrT/ALB0f/ob16X+z3/yTQ/9f0v8lrzT9ov/AJKFaf8AYOj/APQ3r0v9nv8A5Jof+v6X+S0Ufhl8/wAwrfFH5fkeqkhVJJwBya+FfEepNq/ifVNSJybm6kmH0LEj9K+6JkSSGSOT/VspDc44PXntXkyfCb4W2/iC1b7ZGJvNATT5NQVllbHClT8zdjjPP04pJe+mVf3Wjwa8+JXjS9nE0nibUoyMALbzmFB/wFMD9K7nwJ8eNY0u9is/FEp1DTnIU3BUedCPXI++PUHn37V9J/2dY/YPsH2O3+xbNn2fyl8vb6bcYx7V8efFXw/ZeGfiJqWnadGIrT5JYowchAyhiB7ZJx7U1LllboTy3V+x9a67pFh4t8MXWmTuHs7+DAljIPBwVdfXBwRXz9D8Mfit4QfUNO8OTLNY3y7Jpbe4iQOvIBxIQytgnlefevW/gzezX3wq0Z523NGskIP+yrsF/IAD8K72nOCjJijJuKueW/CL4WTeBUudR1WWGXVblPKCwklYY85Iz3JIGfoK5v4hfCDXn8Xt4r8GSp9peUXDQeYI3SYHJZC3ykE8kEjnPXNe7UUnq0+w1omu588aP8IvGfizxdHrfj+ZEiVlMyNKjySqvRFEfyqp79O/HNfQ4GBgdKKKd9LCtrcKKKKQwooooAKKKKACiiigAooooAKKKKACiiigAooooAxPGGhDxN4Q1TRvlD3Vuyxlugccqf8AvoCvjjRNX1XwN4uivoozDf2EzJLDJxnGVdG+vIr7irhvGvwo8N+Npjd3cUlpqOMfa7UhWbHTeCMN9euOM1KvGXMh6OPKzwbTfiVptv8AGS48az2V2LSZG/0ePa0gYxBMckDGR19O3auf8SazqfxO8fG4gtD9ovZFgtbZPm2IOACfzJP17Vr2Xwyjufi5P4IfVXEcO4/axBywEYfG3dx1x1r6M8GfDXw54GVn0y3eW8cbXvLkhpSPQYACj6AZ4zmrio2i3sloS27yS36m74f0lNB8O6dpMbb1s7dId+MbioAJ/E81pUUUN3d2CVlZHy9+0X/yUK0/7B0f/ob16X+z3/yTQ/8AX9L/ACWtnxp8JdB8dazHqmp3epQzxwiALbSIq7QSf4kJz8x71u+DvB+n+CND/sjTZrqW381pt1yys2WxnlVAxx6UqfuxafX/ADuOp70k10/ysdBRRRQB8vftF/8AJQrT/sHR/wDob16X+z3/AMk0P/X9L/Ja2fGnwl0Hx1rMeqand6lDPHCIAttIirtBJ/iQnPzHvW74O8H6f4I0P+yNNmupbfzWm3XLKzZbGeVUDHHpRT92LT6/53Cp70k10/ysaWtaZFrWh32lz/6q7geFj6BgRn9a+Jbm31Xwb4pMUqta6nptwGGR0ZTkMPUHgjsQa+6K5Dxp8N/D3jqJW1OB4rxBtjvLchZQPQ5BDD2I+mKnVS5kVo48rPP7P9pLR/7IVr3Rb/8AtMJ80cJQws3+8W3AH/dOPevDdZ1PVPHfjGa9MBl1DUZwscEQzjoqoPoAB+FezH9meD7RuHiqQQ5+4bEbsf73mY/SvRfBXws8OeB3+02MMlzqBXaby5IZwO4UAAKPoM+pNWknLmZF2lyo2PBfh4eFfB2maLkM9tCBIw6GQnc5H/Aia3qKKJO7uwSsrBRRRSGFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFct4k1nV7XxPoOi6VLYwHUVuWkmu7Z5tvlKrDCrInXJ71l6T8RXnttOt7rSri81S8uLu2jXTQnlSm3bDOpkdQFI5GSehGemRagd7RXMW3jrS7nUobURXUcE88ltBeyKoglmjBLoDu3ZG1uSoU7Tgmqc/xAt5PD97qtrp+pQ2kdnJd219LZiSGZU7gCQEeoVzGWHSlfS4dbHZ0VyrePdMiuPLkiu3gieGG6vkjUQQSyhSiN827J3LnaGC7hkirPijxjpng9LebVkuUtp/MAuEQMiuqlgh5zuYAheOSO1N6AtdjoaKybrWLmPw2NVtdHvLi4eJHjsDtSbc2MK3OFxnnk4ANZ3gfxHfeJfBNvrN/BBDdyGYPHDnYuyRlA5JPRR3oel79AWqTXU100LSI9WbVU0qxXUm+9eLboJjxjl8bunHWtCuC07xxqN1pPgy7mgtQ2tySLdBEbCBY3b5Pm45Udc0f8LQ0660a6u7a1v7Vl0uTU4HubZXEkaNtJCrIMkN2LLnPBxzQ9Lrt/w4JX+f/DHe0VwerfEMwT2ltplnJOx1Gzsrq6kiHkqZsEoMPuDhSD0KjOMk8Vpnx7pcXiaPQrmC7tZpWlWKWfy1V/LBLHbv8wLgHDMgB7E5GXb+v69QWp1NFcVonjqTX/F1pYWtjLBplzpkl9FLcxgSS4kVFZcMRsIJOCA3TIGecu58cav/AMLbXw0kmn2VpGv+pvQyNdhvLO6OTpu5cKoBzsbPUFRK7S73/AO/kek0Vxlh4u1W7+Jdx4dn0n7Hp8dlJcRTTHMs5SRU3AA4VDk4BGTgHjpVLSvH2p3V14ubU9IGnQaNax3MEEpzMysjt+8wSATtHA6ZxzU393m8rj5Xe3p+J6BRXI+BvEd74gsy+o3to14IIpZLOLTprR4C4zz5rkup6BgADg9e2ZaePr2TULe5nitF0i71G506JEVvOQwhyJGfdtIby2+XaMZHJpy912Yk7q6PQaK4Xwr401HWL/SU1CG0SHWbCS+tFgVg0ARlGx2JIckODuAXkEY713VO39fgK4UUUUhhRRWH4u1yXw94aub+2jjlvMrDaxSZKvM7BUBxzjJGcds0m7AblFcXafECIeE9I1S8sLmW9vroae9pZqpZboFlZfnYALuQ8k9CM+tSz/EOwtr9LSXS9UB+1wWMsgSJkhuJQCI2Ik6gEZK5AzjJPFVbWy/r+rr70Hmzr6K5mDx1pdxqUdqsN2IJ55ba3vWRfJmmjBLop3bsja3JUA4OCayR8UbG60e5vLLStRMq6XJqdvHcLGgmjQ7W5DnGD1z25Gam6tf+u40m3Y7yiuAi+JUdvbtdanZ3UYXT7S6e2it1Zw07lAQ4lIYE4O3AIHck4GsvjqyfTLu8XTtR32l41lPblY1aORRuJZy4jVcEHcXA5A6nFU1b+vOwlrt/XU6misrw54gsvFGh2+r6eX+zzbgA+NylWKkHBI6g8gkHsa1aTVgCiiigAooooAKKKKAOc1/wfY+I9d0e/wBRS3uLbTlnDWlxbrKkxkCgE7uBt256H8Kkn8L27a/oOo2jRWlvpEc8cdpFCArCRVXjBAUDb0wevaneJGuooVuP7bOj6dCjNPcQojzM5ICKBIjLg5PAG4naB3zjalq3im20DQbpltLV5Z7RL9nUmUmSZEZFTBVchjk7iRyAP4gR6Jd/zuDItN+Gdlp2ttdqdOktTcTXAVtLjN0TJnKtcEk7QWOMKrdBuIHLl8B6iPC1x4Z/4SIDSfsUlnbxixXeobhWkYt85UdNoTPfNN1LxBqMHix4I9RlRYr63t0tVgQ2rxOE3GWYrlJcs21N6k4TCNuybtxfajpfi2zhn1S5uYbsymSB7RYreJArMgjk25aX5QCpdiQWbaoAwrLl8v8Agf8ABHrzX6lWX4diRrm2GqsNKvZ4Lm8tTAC8kkQTG193yq3lrkFW6HBFaHjHwaPGUdta3epTW+nw75DBAuGebGI3L56ISSFxycZPGKz9G1DWLubTIrrVpyNc02S8Vo4ogbJ1MZ2xZTlcS4+cOflHPWoYL7WoLHU7qPXbu7t5b6HTbKW5gg3IxlEUso8uNQcMWChgRlMnIbFU03o/6ewlpqjs9Ngu7bTLe3vrtbu6jjCS3CxeX5pH8W3Jxn61neE/Dg8L+GodHNz9qEbysZfL2Z3yM+MZPTdjr2pmgahcK+s2Wo3hn/su5Ef2uYIjPGYkky+0KoI3kZAAwB71fgvrLXtMkk0jV4pI2zGLuxljl2N7EhlyPQg/Sk9fmC0VjmdK8AzafLpUM+rrcadpDTNYQC02SKXVlHmPuIfarEDCr6nNUR8LcaRHYf2z9zQ5tI3/AGXr5jhvMxv7Yxt/WtLRYNW1BNWlbxTqf2FJ/ItZ2itBIDGSJX4hC7S2VwVPCZzzxmx6rqtv4asr++8SXMFhqN9kajcQwB7W1KMYySIxGpcqvLKQPMC9cGjff+r6fk3/AMOO7v8A101/NFiX4dTG8zb60IrJtQtdRlgNruZ5YQoID7xhWCA4wSCM5xxUNt8MXg1i2um1iJ7S3vbm78n7EBLL54YMJJd/zEbuG2jAHQ8Yfpetavr8djp8OrS20gF4z30Vum+cQSrHGSrqVAYNubAHQYwDUL+KNY1PQ5NYtrv7GbDRYdTe3SJSlxIwdmRiykhMR4G0qfmOTwKe+r2/r/5ESXRf1/VzS8N+B7nQdXsLubWRdwWGnNp1vALXyyIy6sGZt5ywCgE4APHA7xeI/Al74k8VWF7d6tG+lWzeatu1uPNiYPEwVHGPlJi5LAkAkc7vlt6r4jvDruj2umlVtWvI4r6RlBJLxsyxD3wAxPbK+pxBaazqZ1Owvpb15LPUNTuNP+xGJAkKx+bsdTt37j5PO5iPmOAMChXbT7P8d/1F0duq/DX9EbD+Hd3jiLxL9qxs09rH7P5fXMgfduz7Yxj8ahg8MS23iHxBq8GpNFLq0EMSbIVJtzGrKGBbIb72cEY471DpOo69L4q1uy1D7HthtYJrW2gY7U3NMPmkK5JOxc/LgdADgk5SeItfttI19r94pL6DVIbOFLOPcsKyrBwm4fOR5jEFsZPUAcBdLLt+b/zZXV/L8rmhD4U1db6fVZPEKf2xLHBbm5hsQsYgjfcy+WzN8z5YFs8Z4AxUVr4BS31WKSS/83TIL2e/gtDDh1mmDBsybuVG9sDaDzyTiqT6/qsWlw2Cz6rNqMuom1kDQWovYF8kygfKTAWIAw3C7W55FS6rreuxfDi41HSruF7y1in+0XN5GFliMW4EeWmUaQFdpOQufmAI+Wi39etn/X3gk27d/wDgr+vIueHPA/8AYN7ZTS6j9ri020ezsE8jY0cTMCd7bjvb5VGQFGB0yc111cX4i1bVYZdVmsr5rdNH0xL4xCJCt058wlXLKSFxFj5Cpyx54FdjFIJYUkAwHUNg+9PWxK79/wDJf8AfRRTZJEijaSRgqICzE9ABSbsMdXP+JvC6+J5tKW4vZYbOyuftMkMJZHmYKQmJFYMmCc5H6Vj2mta9daRqq+aBqMtp/aWmr5agiJs4iIIOSNqgk8/vB7Vt6Vq8msaxNJbS/wDEuitISBgfPLIN/Xrwmzvj5z6UW1/r+t194X/r+vJmFB8OFtLlRb6tKLOPWo9YjhmVpXVghV0MjOS24nduPI565rI1Twp4iuPGVxHaWpi0e41i01N5t8bKxjC78ksHGdowgRuQDvA4r0Wz1fTdRuLm3sdRtLqa1bZPHBMrtE3IwwByp4PX0Ncvq2sahoeo6ncRalLqMFtYzXM9s8KbLWQbTCilFDZYFshmYkDIxxkTs1/W1v8AJA1e6/rr/myHTPhra6XrjXsUmnGAXEtym7S4zdbpMna1wSSVUkkYCt0G4jqyy+GiWtnb2smqtIkWiTaOxWDaWEjBvMHzHGOmOfrVyx1u8g0XUEnk1JtXR40SHUYYFZXlwse0QceXuz1JYYbJ4qM3+rx3huTq0rW0Wox6Y1v5MWHDKqmUnbkSeY27g7cDG3vRb7P9dv1t8w5re9/Xf9PwKMnwzuLm3dLrW4mla0srXdFZFQBbSl1ODIeSMA89efarF38O5Jrma6h1WITtrLarGtxZ+bEC0Qj2Mm8bsYyGyMHtV60mvtK1LV7q717UNQ03TrYB0uIYMmbG8hfKiQnC7eMnJf2pL6TWrSHSGbWZTqc0kSmwSGIpNlwZc/Lu2ojHlWXG0Z3E8u+t+/6u/wCaTC1tP62t+TNHwh4dfwt4fTSnvfthSaWXzvKEZO9y/IBPPzdf5Vu1xdjqOr3F3ZXD6m/katJdQRwGGPbalNxjZDtDE7UO7cWBJ4wBikivL59E1CVtf1R7SG7C2uo2tlFNNOmxc8LEUKCQsN4QDC9f4qlvT+vQFqztaKz9Bup77w/p11cyQS3E1tG8r27ho2cqMlSCQRnPQkVoVTVnYSd9QooopDCiiigDC1zw0Na1Cxvf7W1CylstxiW3ELJubjeVljcbgMgHqAT6mrV3oyX+mW9leXdzP5M0M3ntsV5GjdXBbaoXkqM4A46YrTooWgHP3PhG0udTkumvb1Lea4jup7FGTyZpk27XOV3j7icBgDtGQcnMqeHF/tFLmfVNRuYIpjPDZzujRxSHPIbaJDjc2AzkDPA4GNuijyAw9H8LWmjXQmjurucRRG3tY52UraxEgmNMKCRwvLFjhQM1J/wjdn/wjMeheZP5EaKEmDASq6sGWTIGNwYBumMjkVsUUB1uZ+k6TFpMEyrPNcz3EpmnuZ9u+V8AZO0KowqqMAAYArQoooYGXFoNtB4ZOhRzTi3Nu1v5uV8zDAgtnGN3JOcde1PvdJ+06fBaW19eaeYCpimtGUMuBjBDKyMMdmUjv1AI0aKAOel8I2rWlpFbX9/aT23m/wClwuhlkEp3S79ylTvbDHAGCBjFNu/Bem3KQwxTXVpaparZS20DrsuLdfuxvuUnAy3KlW+Y810dFAHP6j4I8N6pqMGoXGj2P2uK4W4My20e+VgCAHYrkjkH6gelSW/ha0ttY+3i5u3jSaS5htHZTDDNICHdfl3ZO5+CxA3nAFblFC02ApRaXBDrV1qitIZ7mCKB1JG0LGXIxxnP7w559KqP4ctHi1RPNuFOozrcu6sN0UiqiqyccY8tSM559uK2KKAuYI8LQizdP7Rvvtz3AujqX7oTmQLsBxs8v7nyY2Yx2zzUzeG7N/DN1oTSTmC7jlWebK+Y7SZLuTjbuJYngY54AHFbFFAXMLVvCtpq9z5sl1dwrJALa6ihZQl1CCSEkypOOW5UqfmPNboGBgdKKKACqeq6bFrGlXOnXDyJBcxmOQxkBip6jkHqMj8auUUAYVn4O0HTNUg1HS9MtdOniR42+xQJEJVbGVfC8gEAj3H1qzoWg2fh6zltbIymOSd5iZW3EFjwo/2VACgdgAK1KKACudt/CKQw3drNrGpXVhded5lnMIAmZCSx3LGsmck4O6uiooA5+y8LJa6jFeT6jdX0qOZGkuwhd2CbE5RVUBVZ+NvJcnOesx8M2p1o6h9pu9hmFybPcvkmcLsEn3d2doHG7bkA7c81tUUeYeRkNoMRt1txO7Qm+N5MJAGMh3lwueMANtxweFx71HdeHpJtcfVbfW9Rs5JI443hhWBkZUJIHzxMwzuOcEVt0UA9TmZvBNlOl3GdQ1BYZkmSKJXTba+acyGPKZJYk/fLYBIGAcVaGgXy2fkDxTrAcMCswjtAyrjG3Ag247/dzxwRW5RR5AVtPsINL063sbYMIYECJuYscD1J6mrNFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFAH/9k=" 
            canvas.width = img.width;
            canvas.height = img.height;
            const ctx = canvas.getContext('2d');
            ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
            imagenContainer.appendChild(canvas);
//prueba hasta
          }

          );
    }

      'use strict';
      document.addEventListener('WebComponentsReady', function() {
        let progress = document.querySelector('#progress');
        let dialog = document.querySelector('#dialog');
        let message = document.querySelector('#message');
        let printButton = document.querySelector('#print');
        let printCharacteristic;
        let index = 0;
        let data;
        progress.hidden = true;

        let image = document.querySelector('#image');
        // Use the canvas to get image data
        let canvas = document.createElement('canvas');
        // Canvas dimensions need to be a multiple of 40 for this printer
        canvas.width = 120;
        canvas.height = 120;
        let context = canvas.getContext("2d");
        context.drawImage(image, 0, 0, canvas.width, canvas.height);
        let imageData = context.getImageData(0, 0, canvas.width, canvas.height).data;

        function getDarkPixel(x, y) {
          // Return the pixels that will be printed black
          let red = imageData[((canvas.width * y) + x) * 4];
          let green = imageData[((canvas.width * y) + x) * 4 + 1];
          let blue = imageData[((canvas.width * y) + x) * 4 + 2];
          return (red + green + blue) > 0 ? 1 : 0;
        }

       

        function getImagePrintData() {
          if (imageData == null) {
            console.log('No image to print!');
            return new Uint8Array([]);
          }
          // Each 8 pixels in a row is represented by a byte
          let printData = new Uint8Array(canvas.width / 8 * canvas.height + 8);
          let offset = 0;
          // Set the header bytes for printing the image
          printData[0] = 29;  // Print raster bitmap
          printData[1] = 118; // Print raster bitmap
          printData[2] = 48; // Print raster bitmap
          printData[3] = 0;  // Normal 203.2 DPI
          printData[4] = canvas.width / 8; // Number of horizontal data bits (LSB)
          printData[5] = 0; // Number of horizontal data bits (MSB)
          printData[6] = canvas.height % 256; // Number of vertical data bits (LSB)
          printData[7] = canvas.height / 256;  // Number of vertical data bits (MSB)
          offset = 7;
          // Loop through image rows in bytes
          for (let i = 0; i < canvas.height; ++i) {
            for (let k = 0; k < canvas.width / 8; ++k) {
              let k8 = k * 8;
              //  Pixel to bit position mapping
              printData[++offset] = getDarkPixel(k8 + 0, i) * 128 + getDarkPixel(k8 + 1, i) * 64 +
                          getDarkPixel(k8 + 2, i) * 32 + getDarkPixel(k8 + 3, i) * 16 +
                          getDarkPixel(k8 + 4, i) * 8 + getDarkPixel(k8 + 5, i) * 4 +
                          getDarkPixel(k8 + 6, i) * 2 + getDarkPixel(k8 + 7, i);
            }
          }
          return printData;
        }

        function handleError(error) {
          console.log(error);
          progress.hidden = true;
          printCharacteristic = null;
          dialog.open();
        }

        function sendNextImageDataBatch(resolve, reject) {
          // Can only write 512 bytes at a time to the characteristic
          // Need to send the image data in 512 byte batches
          if (index + 512 < data.length) {
            printCharacteristic.writeValue(data.slice(index, index + 512)).then(() => {
              index += 512;
              sendNextImageDataBatch(resolve, reject);
            })
            .catch(error => reject(error));
          } else {
            // Send the last bytes
            if (index < data.length) {
              printCharacteristic.writeValue(data.slice(index, data.length)).then(() => {
                resolve();
              })
              .catch(error => reject(error));
            } else {
              resolve();
            }
          }
        }

        function sendImageData() {
          index = 0;
          data = getImagePrintData();
          return new Promise(function(resolve, reject) {
            sendNextImageDataBatch(resolve, reject);
          });
        }

        function sendTextData() {
          // Get the bytes for the text
          let encoder = new TextEncoder("utf-8");
          // Add line feed + carriage return chars to text
          let text = encoder.encode(message.value + '\u000A\u000D');
          return printCharacteristic.writeValue(text).then(() => {
            console.log('Write done.');
          });
        }

        function sendPrinterData() {
          // Print an image followed by the text
          sendImageData()
          .then(sendTextData)
          .then(() => {
            progress.hidden = true;
          })
          .catch(handleError);
        }

        printButton.addEventListener('click', function () {
          obtenerImagen();
          progress.hidden = false;
          if (printCharacteristic == null) {
            navigator.bluetooth.requestDevice({
              filters: [{
                services: ['000018f0-0000-1000-8000-00805f9b34fb']
              }]
            })
            .then(device => {
              console.log('> Found ' + device.name);
              console.log('Connecting to GATT Server...');
              return device.gatt.connect();
            })
            .then(server => server.getPrimaryService("000018f0-0000-1000-8000-00805f9b34fb"))
            .then(service => service.getCharacteristic("00002af1-0000-1000-8000-00805f9b34fb"))
            .then(characteristic => {
              // Cache the characteristic
              printCharacteristic = characteristic;
              sendPrinterData();
            })
            .catch(handleError);
          } else {
            sendPrinterData();
          }
        });
      });
    </script>
  </body>
</html>
